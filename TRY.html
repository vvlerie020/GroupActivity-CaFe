<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Sequence Guessing Game</title>
<style>
/* --- Styles (same as before) --- */
body { font-family: Arial; margin: 0; background: #f0f0f0; }
#menu-btn { position: fixed; top:10px; left:10px; display:none; padding:10px; background:#333; color:white; border:none; cursor:pointer; z-index:1000;}
#dropdown { position: fixed; top:50px; left:10px; background:white; border:1px solid #ccc; display:none; z-index:1000; width:200px;}
#dropdown div, #dropdown button { padding:10px; border-bottom:1px solid #eee; text-align:center; width:100%; cursor:pointer;}
#cover-page { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:linear-gradient(to bottom,#4CAF50,#2196F3); color:white; text-align:center;}
#cover-page h1 { font-size:48px; margin-bottom:20px; }
#cover-page button { padding:15px 30px; font-size:24px; background:white; color:#333; border:none; border-radius:5px; cursor:pointer; }
#homepage { display:none; flex-direction:column; align-items:center; justify-content:center; height:100vh; text-align:center;}
#registration { display:none; flex-direction:column; align-items:center;}
#registration input { margin-bottom:10px; padding:8px; width:200px;}
#game { display:none; max-width:800px; margin:0 auto; padding:20px;}
#scores { display:flex; justify-content:space-between; font-weight:bold; margin-bottom:10px;}
#turn, #round { text-align:center; margin-bottom:10px; font-weight:bold;}
#placement-area { display:flex; justify-content:center; margin-bottom:20px; }
.slot { width:80px; height:80px; border:2px solid black; margin:0 5px; background:white; cursor:pointer; position:relative; }
.slot img { width:100%; height:100%; object-fit:cover; }
#hidden-area { position:relative; height:100px; background:#ddd; margin-bottom:20px; display:flex; justify-content:center; align-items:center;}
#barrier { position:absolute; top:0; left:0; width:100%; height:100%; background:url('https://via.placeholder.com/800x100/000000/FFFFFF?text=Hidden+Images') no-repeat center; background-size:cover; display:flex; justify-content:center; align-items:center; color:white; font-size:24px; text-shadow:2px 2px 4px rgba(0,0,0,0.5);}
#pool { display:flex; flex-wrap:wrap; justify-content:center; margin-bottom:20px;}
.image-piece { width:70px; height:70px; margin:5px; cursor:pointer; border:1px solid #ccc; display:inline-block; }
.image-piece.selected { border:3px solid blue; opacity:0.7;}
.image-piece img { width:100%; height:100%; object-fit:cover; }
#submit-guess-btn, button { padding:10px 20px; margin:10px; font-size:16px; }
@media (max-width:600px){ .slot{width:60px;height:60px;} .image-piece{width:50px;height:50px;} #game{padding:10px;} }
</style>
</head>
<body>

<button id="menu-btn">Menu</button>
<div id="dropdown">
    <div id="how-content" style="display:none;">How to Play: Click an image to select, then click a slot to place. Submit to check. Correct earns points, wrong returns.</div>
    <div id="guide-content" style="display:none;">Guide: Fill all slots to advance rounds.</div>
    <div id="about-content" style="display:none;">About: A guessing game with images.</div>
    <button id="how-btn">How to Play</button>
    <button id="guide-btn">Guide</button>
    <button id="about-btn">About</button>
    <button id="back-home-btn">Back to Homepage</button>
</div>

<div id="cover-page">
    <h1>Image Sequence Guessing Game</h1>
    <button id="play-btn">Play</button>
</div>

<div id="homepage">
    <div id="mode-selection">
        <h2>Select Mode</h2>
        <button id="single-player-btn">Single Player</button>
        <button id="multiplayer-btn">Multiplayer</button>
    </div>
    <div id="registration">
        <h2>Enter Names</h2>
        <input type="text" id="player1-name" placeholder="Player 1 Name">
        <input type="text" id="player2-name" placeholder="Player 2 Name" style="display:none;">
        <button id="start-game-btn">Start Game</button>
    </div>
</div>

<div id="game">
    <div id="scores">
        <div id="player1-score">Player 1: 0</div>
        <div id="player2-score">Player 2: 0</div>
    </div>
    <div id="turn">Player 1's turn</div>
    <div id="round">Round 1</div>
    <div id="placement-area"></div>
    <div id="hidden-area">
        <div id="barrier"></div>
        <div id="hidden-slots" style="display:none;"></div>
    </div>
    <div id="pool"></div>
    <button id="submit-guess-btn">Submit Guess</button>
</div>

<script>
const images = [
    'pics/bigteeth.jpg','pics/chinpoint.jpg','pics/flirty.jpg','pics/floewerteeth.jpg',
    'pics/gahaman.jpg','pics/happy.jpg','pics/inlove.jpg','pics/pacute.jpg','pics/shhkindat.jpg','pics/thinking.jpg'
];
// let mode='', kung ilan players single or multiple 
// players=['',''], dito nilalagay yung player names
// currentPlayer=0, kung sino titira like 1 or 0 
// scores=[0,0],  dito nilalagay yung scores
let mode='', players=['',''], currentPlayer=0, scores=[0,0], round=1;
// let hidden=[],  array of images na need hulaan
// pool=[],kung ilan pwede ilagay
// placement=[], kung ilan image ang nalagay
// selectedImage=null; napiling images sa pool
// basePoints=10, pints na makukuha pag tama
let hidden=[], pool=[], placement=[], basePoints=10, selectedImage=null;

function showCoverPage(){ 
    document.getElementById('cover-page').style.display='cover'; //display cover page 
 document.getElementById('homepage').style.display='none'; //<!-- Hide homepage -->
 document.getElementById('game').style.display='none'; // hide game are 
  document.getElementById('menu-btn').style.display='none'; } // hide menu button
function showModeSelection(){ //shows the player choice
    document.getElementById('cover-page').style.display='none'; //hide cover page
 document.getElementById('homepage').style.display='flex'; //show homepage 
 document.getElementById('mode-selection').style.display='block'; //show mode selection
 document.getElementById('registration').style.display='none'; //hide name input
 document.getElementById('game').style.display='none'; //hide game area
document.getElementById('menu-btn').style.display='block'; //show menu button
 document.getElementById('dropdown').style.display='none'; //hide dropdown menu
 document.getElementById('how-content').style.display='none'; //hide how to play
 document.getElementById('guide-content').style.display='none'; // hide guide
 document.getElementById('about-content').style.display='none'; } // hide about
function showRegistration(){
     document.getElementById('mode-selection').style.display='none'; //hide mode selection
document.getElementById('registration').style.display='flex'; //show name input
document.getElementById('player2-name').style.display=mode==='single'?'none':'block'; } // If single-player, hide Player 2 input; if multiplayer, show it 

function startGame(){ // Start the game
    players[0]=document.getElementById('player1-name').value||'Player 1'; // Get Player 1 name from input, default to 'Player 1' if empty 
     players[1]=mode==='multi'?document.getElementById('player2-name').value||'Player 2':'Computer'; //If multiplayer: get Player 2 name, else set to 'Computer'
document.getElementById('homepage').style.display='none'; // Hide homepage
document.getElementById('game').style.display='block';  // Show game area 
initRound(); }// start the first round
function updateScores(){ //scores on display screen
     document.getElementById('player1-score').textContent=`${players[0]}: ${scores[0]}`; //player 1 score
 document.getElementById('player2-score').textContent=`${players[1]}: ${scores[1]}`; }// player 2 score
function updateTurn(){
     document.getElementById('turn').textContent=`${players[currentPlayer]}'s turn`; //display current player's turn

 }

function shuffle(array){
     return array.sort(()=>Math.random()-0.10); }  //randomly shuffles array elements
// change it to -0.10 for better shuffling

/* ---------- ROUND ---------- */
function initRound(){ //new round
    const slots = 4 + (round-1)*2;  // round 1, 4 slots; round 2, 6 slots; round 3, 8 slots
    hidden = shuffle([...images]).slice(0, slots); // <!-- Pick first 'slots' number of shuffled images as the hidden ones to guess -->
    placement=new Array(slots).fill(null); // Create empty array of same size (all null = empty slots) -->
    pool=[...hidden]; //  Copy hidden array so pool has exactly the images needed 

    renderHidden(); renderPlacement(); renderPool(); updateScores(); // Draw all three areas and update scores
    document.getElementById('round').textContent=`Round ${round}`; //Display current round number
    currentPlayer=0; //Reset to Player 1 
    selectedImage=null; //Clear any selected image
    updateTurn(); // Update display to show whose turn

    // If computer turn
    if(mode==='single' && players[currentPlayer]==='Computer'){
        setTimeout(computerTurn,1000); // Wait 1 second, then run computer's turn 
    }
}

/* ---------- RENDER ---------- */
function renderHidden(){
    // Gets the HTML element where hidden images will be displayed
    const hiddenSlots=document.getElementById('hidden-slots');
    
    // Clears out any previously rendered slots (starts fresh)
    hiddenSlots.innerHTML='';
    
    // Loops through each image in the 'hidden' array
    hidden.forEach(img=>{
        // Creates a new div element for each slot
        const div=document.createElement('div');
        
        // Adds the 'slot' class for styling
        div.className='slot';
        
        // Creates an img element
        const imgEl=document.createElement('img');
        
        // Sets the image source to the current hidden image
        imgEl.src=img;
        
        // Adds the img element inside the div
        div.appendChild(imgEl);
        
        // Adds the complete slot to the page
        hiddenSlots.appendChild(div);
    });
}
function renderPlacement(){
    // Gets the placement area where players put their guesses
    const placementArea=document.getElementById('placement-area');
    
    // Clears previous slots
    placementArea.innerHTML='';
    
    // Loops through each slot in the 'placement' array
    placement.forEach((img,index)=>{
        // Creates a new div for the slot
        const div=document.createElement('div');
        
        // Adds 'slot' class for styling
        div.className='slot';
        
        // Stores the index so the game knows which slot was clicked
        div.dataset.index=index;
        
        // If there's an image in this slot (not null)
        if(img){
            // Creates an img element
            const imgEl=document.createElement('img');
            
            // Sets the image source
            imgEl.src=img;
            
            // Adds the image to the slot
            div.appendChild(imgEl);
        }
        
        // Adds the slot to the page
        placementArea.appendChild(div);
    });
}
function renderPool(){
    // Gets the pool container (where available images are shown)
    const poolDiv=document.getElementById('pool');
    
    // Clears previous images
    poolDiv.innerHTML='';
    
    // Loops through each image still available in 'pool'
    pool.forEach(img=>{
        // Creates a new div for the image piece
        const div=document.createElement('div');
        
        // Adds 'image-piece' class for styling
        div.className='image-piece';
        
        // Stores the image source as data (for clicking)
        div.dataset.img=img;
        
        // Creates an img element
        const imgEl=document.createElement('img');
        
        // Sets the image source
        imgEl.src=img;
        
        // Adds the image to the piece
        div.appendChild(imgEl);
        
        // Adds the piece to the pool
        poolDiv.appendChild(div);
    });
}

/* ---------- GUESS ---------- */
function submitGuess(){ //<!-- Check if player's placement is correct 
    if(placement.some(p=>p===null)){ //If any slot is empty (null)
        alert('Fill all slots!'); return; } //erroe message

    let anyCorrect=false; // Flag to track if any guesses were correct
    placement.forEach((img,index)=>{ // Loop through each placed image
        if(img===hidden[index]){ scores[currentPlayer]+=10; // If correct, add points
             anyCorrect=true; } // if correct place
        else { //if image doesnt match
             placement[index]=null; pool.push(img); } //clear the incorrect placement and return image to pool
    });

    renderPlacement(); renderPool(); updateScores(); //Redraw the placement area, pool, and scores 

    if(!anyCorrect){ //If no placements were correct
        currentPlayer=(currentPlayer+1)%2; } //Switch to other player (0→1 or 1→0

    updateTurn(); // Update display to show whose turn now 

    if(mode==='single' && players[currentPlayer]==='Computer'){ //If single-player AND it's now computer's turn 
         setTimeout(computerTurn,1000); } //Wait 1 second, then run computer's turn

    if(placement.every((p,i)=>p===hidden[i])){ //If all placements are correct
        round++; // Go to next round
        if(round>3){ //If we're past round 3
             const winner = scores[0]>scores[1]?players[0]:scores[1]>scores[0]?players[1]:'Tie'; // Determine winner: if Player 1 score higher → Player 1 wins, else if Player 2 higher → Player 2 wins, else Tie
             alert(`Game Over! Winner: ${winner}`); } // Show game over message with winner
        else{ initRound(); } //If still in rounds 1-3
    }
}

/* ---------- COMPUTER ---------- */
function computerTurn(){ //Computer automatically fills all empty slots
    const emptySlots = placement.map((p,i)=>p===null?i:-1).filter(i=>i!==-1); 
    //Find all empty slot positions (returns their indices) 
    emptySlots.forEach(index=>{ //For each empty slot
        const correctImg=hidden[index]; //Get the correct image for this slot
        let poolIndex=pool.indexOf(correctImg); //Check if the correct image is in the pool
        if(poolIndex!==-1){ //If correct image IS in the pool 
             placement[index]=pool.splice(poolIndex,1)[0]; //Place the correct image and remove from pool 
             scores[currentPlayer]+=10; } //Award points
        else{ placement[index]=pool.splice(Math.floor(Math.random()*pool.length),1)[0]; }
    });

    renderPlacement(); renderPool(); updateScores(); //Redraw placement, pool, and scores

    currentPlayer=0; updateTurn();//Switch back to Player 1

    if(placement.every((p,i)=>p===hidden[i])){ //If all are correct (computer solved it)
        round++; //Next round
        if(round>3){ //if past round 3
             const winner = scores[0]>scores[1]?players[0]:scores[1]>scores[0]?players[1]:'Tie'; alert(`Game Over! Winner: ${winner}`); }
        else{ initRound(); }
    }
}

/* ---------- EVENTS ---------- */
document.getElementById('play-btn').addEventListener('click',showModeSelection); 
//When Play button clicked: show mode selection screen
document.getElementById('single-player-btn').addEventListener('click',()=>{mode='single'; showRegistration();});
//When Single Player clicked: set mode to 'single' and show name input
document.getElementById('multiplayer-btn').addEventListener('click',()=>{mode='multi'; showRegistration();});
//When Multiplayer clicked: set mode to 'multi' and show name input
document.getElementById('start-game-btn').addEventListener('click',startGame);
//When Start Game clicked: initialize and start the game 
document.getElementById('submit-guess-btn').addEventListener('click',submitGuess);
// When Submit Guess clicked: check the player's placements
document.getElementById('pool').addEventListener('click',e=>{
    //When any image in the pool is clicked
    const piece=e.target.closest  ('.image-piece');//Get the image piece that was clicked
     if(piece){  //If an image piece was clicked
         document.querySelectorAll('.image-piece').forEach(p=>p.classList.remove('selected')); //Remove 'selected' styling from ALL images
          piece.classList.add('selected'); // Add 'selected' styling to the clicked image
          selectedImage=piece.dataset.img; }  //Store that image as the currently selected one
});

document.getElementById('placement-area').addEventListener('click',e=>{ // When any slot in placement area is clicked
    const slot=e.target.closest('.slot'); //Get the slot that was clicked 
    if(slot && selectedImage){ // If a slot was clicked AND an image is selected 
        const index=parseInt(slot.dataset.index); //Get the slot's position number
        if(placement[index]===null){ //If that slot is empty 
            placement[index]=selectedImage; //Place the selected image in the slot 
            pool.splice(pool.indexOf(selectedImage),1); //Remove that image from the pool
            selectedImage=null; //clear the selection
            document.querySelectorAll('.image-piece').forEach(p=>p.classList.remove('selected')); // Remove highlight from all images
            renderPlacement(); renderPool(); //Redraw the placement area and pool
        }
    }
});

showCoverPage(); // When page loads: start by showing the cover/splash screen
</script>
</body>
</html>
